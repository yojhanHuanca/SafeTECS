/* css/historial.css */
/* Body style from base.css (light theme) is used by default. */

.hidden { /* Keep utility class */
    display: none !important;
}

/* Header */
.history-header {
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    height: 64px; /* Keep specific height */
    background: var(--background-glass-light); /* Was rgba(255,255,255,0.85) */
    backdrop-filter: blur(10px); /* Keep effect */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 var(--space-lg); /* Was 0 1.2rem */
    box-shadow: var(--shadow-sm);
    z-index: 100;
    border-bottom-left-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-lg);
    animation: fadeIn 0.7s; /* Keep animation */
}

@keyframes fadeIn { /* Keep animation */
    from { opacity: 0; transform: translateY(-20px);}
    to { opacity: 1; transform: translateY(0);}
}

/* .back-btn and .icon-btn in header are icon buttons */
.history-header .back-btn, .history-header .icon-btn {
    /* Using .btn-icon from base.css for base styling (padding, display, align, justify) */
    /* Specifics for history header icon buttons: */
    color: var(--primary-color);
    font-size: calc(var(--font-size-base) * 1.5); /* Was 1.7rem */
    background: none; /* Override .btn-icon background if any */
    border: none; /* Override .btn-icon border if any */
    margin: 0; /* Reset margin if any from .btn-icon */
    width: 44px; /* Retain size */
    height: 44px;
    border-radius: var(--radius-full);
}

.history-header .back-btn:hover, .history-header .icon-btn:hover {
    background: var(--primary-color-light);
    color: var(--primary-color-dark); /* Was #2741a6 */
}
.history-header .back-btn:focus-visible, .history-header .icon-btn:focus-visible {
    background: var(--primary-color-light);
    color: var(--primary-color-dark);
    outline: var(--border-width-medium) solid var(--primary-color-dark);
    outline-offset: 1px;
}


.history-header h1 {
    font-size: var(--font-size-h4); /* Was 1.35rem */
    font-weight: var(--font-weight-bold);
    letter-spacing: -1px; /* Keep specific style */
    color: var(--text-color-dark);
}

/* Filtros */
.filters-dropdown {
    background: rgba(255,255,255,0.97); /* Keep specific background */
    padding: var(--space-lg) var(--space-md) var(--space-md) var(--space-md); /* Was 1.5rem 1rem 1rem 1rem */
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--space-lg); /* Was 1.2rem */
    animation: slideDown 0.3s ease; /* Keep animation */
    display: grid;
    grid-template-columns: 1fr 1fr 1fr auto; /* Keep layout */
    gap: var(--space-md); /* Was 1rem */
    align-items: end;
}

@keyframes slideDown { /* Keep animation */
    from { transform: translateY(-20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.filter-group label {
    display: block;
    font-size: var(--font-size-sm); /* Was 0.93rem */
    margin-bottom: var(--space-xs); /* Was 0.4rem */
    color: var(--text-color-dark); /* Was var(--gray-800) */
    font-weight: var(--font-weight-medium);
}

/* .filter-input will use .form-control from base.css. Applied in HTML. */
/* Removed .filter-input and .filter-input:focus specific styles here */

.filter-actions {
    display: flex;
    gap: var(--space-sm); /* Was 0.7rem */
    margin-top: 0; /* Keep as is */
}

/* .btn-primary, .btn-outline styles are now in base.css */
/* HTML needs to use <button class="btn btn-primary"> and <button class="btn btn-outline"> */


/* Lista de Accesos */
.history-container {
    padding: var(--space-lg) var(--space-sm) 90px var(--space-sm); /* Keep bottom padding for pagination */
    max-width: 480px; /* Keep specific max-width */
    margin: 0 auto;
}

.loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-xl); /* Was 2rem */
    color: var(--text-color-muted-dark); /* Was var(--gray-500) */
}

.spinner {
    width: 44px; /* Keep specific size */
    height: 44px;
    border: 4px solid var(--primary-color-light);
    border-top-color: var(--primary-color);
    border-radius: var(--radius-full);
    animation: spin 1s linear infinite; /* Keep animation */
    margin-bottom: var(--space-md); /* Was 1rem */
}

@keyframes spin { /* Keep animation */
    to { transform: rotate(360deg); }
}

.access-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md); /* Was 1.1rem */
}

.access-item {
    background: rgba(255,255,255,0.97); /* Keep specific background */
    border-radius: var(--radius-md);
    padding: var(--space-md) var(--space-md); /* Was 1.1rem 1rem */
    display: flex;
    align-items: center;
    gap: var(--space-md); /* Was 1.1rem */
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
    animation: itemIn 0.5s; /* Keep animation */
    transition: box-shadow var(--transition-short), transform var(--transition-short);
}

@keyframes itemIn { /* Keep animation */
    from { opacity: 0; transform: translateY(20px);}
    to { opacity: 1; transform: translateY(0);}
}

.access-item:hover {
    box-shadow: var(--shadow-lg);
    transform: scale(1.015); /* Keep specific interaction */
}
.access-item:focus-visible { /* Added focus state */
    outline: var(--border-width-thick) solid var(--primary-color);
    box-shadow: var(--shadow-lg);
    transform: scale(1.015);
}


.access-icon {
    width: 48px; /* Keep specific size */
    height: 48px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color-light);
    font-size: calc(var(--font-size-base) * 1.7); /* Was 2rem */
    box-shadow: var(--shadow-sm); /* Was 0 2px 8px rgba(67,97,238,0.10) */
    flex-shrink: 0;
    transition: background var(--transition-short);
}

.access-item.success .access-icon {
    background: linear-gradient(135deg, var(--success-color) 60%, var(--success-color) 100%); /* Simplified */
    color: var(--text-color-light);
}

.access-item.error .access-icon {
    background: linear-gradient(135deg, var(--error-color) 60%, var(--error-color) 100%); /* Simplified */
    color: var(--text-color-light);
}

.access-item.entry .access-icon {
    background: linear-gradient(135deg, var(--primary-color) 60%, var(--primary-color-dark) 100%); /* Simplified */
    color: var(--text-color-light);
}

.access-info {
    flex: 1;
    min-width: 0; /* For text ellipsis */
}

.access-info h3 {
    font-size: var(--font-size-base); /* Was 1.05rem */
    margin-bottom: var(--space-xxs); /* Was 0.18rem */
    font-weight: var(--font-weight-semibold);
    color: var(--text-color-dark); /* Was var(--gray-800) */
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis; /* Keep text handling */
}

.access-info p {
    font-size: var(--font-size-sm); /* Was 0.89rem */
    color: var(--text-color-muted-dark); /* Was var(--gray-500) */
    font-weight: var(--font-weight-medium);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis; /* Keep text handling */
}

.access-status {
    font-size: calc(var(--font-size-base) * 1.2); /* Was 1.3rem */
    font-weight: var(--font-weight-bold);
    margin-left: var(--space-xs); /* Was 0.5rem */
    transition: color var(--transition-short);
}

.access-item.success .access-status { color: var(--success-color); }
.access-item.error .access-status { color: var(--error-color); }
.access-item.entry .access-status { color: var(--primary-color); }
.access-item.exit .access-status { color: var(--text-color-muted-dark); /* Was var(--gray-500) */ }


/* Microinteracción: highlight al agregar nuevo */
.access-item.new {
    animation: highlightNew 1.2s; /* Keep animation */
}

@keyframes highlightNew { /* Keep animation, use variable for shadow */
    0% { box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb),0.25); } /* Was #4361ee44 */
    70% { box-shadow: 0 0 0 16px rgba(var(--primary-color-rgb),0); } /* Was #4361ee00 */
    100% { box-shadow: var(--shadow-md); }
}

/* Paginación Móvil */
.pagination-mobile {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255,255,255,0.97); /* Keep specific background */
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-lg); /* Was 1.2rem */
    padding: var(--space-md) var(--space-sm); /* Was 1rem 0.5rem */
    box-shadow: 0 -2px 10px rgba(var(--primary-color-rgb),0.07); /* Use variable */
    z-index: 50; /* Keep z-index */
}

#pageInfoMobile {
    font-size: var(--font-size-base); /* Was 1rem */
    font-weight: var(--font-weight-medium);
    color: var(--primary-color);
}

/* .btn-icon class for pagination buttons */
.pagination-mobile .btn-icon { /* Base styles from .btn-icon in base.css */
    background: var(--primary-color-light);
    color: var(--primary-color);
    width: 40px; /* Keep specific size */
    height: 40px;
    font-size: calc(var(--font-size-base) * 1.3); /* Was 1.5rem */
}
.pagination-mobile .btn-icon:hover {
    background: var(--primary-color);
    color: var(--text-color-light);
}
.pagination-mobile .btn-icon:focus-visible { /* Ensure focus state */
    outline: var(--border-width-medium) solid var(--primary-color-dark);
    background: var(--primary-color);
    color: var(--text-color-light);
}


.pagination-mobile .btn-icon:disabled { /* Keep disabled style */
    opacity: 0.5;
    cursor: not-allowed;
}

/* Modal Exportar */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(var(--primary-color-rgb),0.13); /* Use variable */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000; /* Keep z-index */
    padding: var(--space-md); /* Was 1rem */
    animation: fadeIn 0.3s; /* Keep animation */
}

.modal-content {
    background: rgba(255,255,255,0.98); /* Keep specific background */
    border-radius: var(--radius-md);
    padding: var(--space-xl) var(--space-lg) var(--space-lg) var(--space-lg); /* Was 2rem 1.2rem 1.5rem 1.2rem */
    width: 100%;
    max-width: 340px; /* Keep specific max-width */
    text-align: center;
    box-shadow: var(--shadow-md);
    animation: modalIn 0.3s; /* Keep animation */
    position: relative;
}

@keyframes modalIn { /* Keep animation */
    from { opacity: 0; transform: translateY(30px);}
    to { opacity: 1; transform: translateY(0);}
}

.modal-content h2 {
    font-size: var(--font-size-h4); /* Was 1.22rem */
    margin-bottom: var(--space-sm); /* Was 0.5rem */
    color: var(--primary-color);
    font-weight: var(--font-weight-bold);
}

.modal-content p {
    font-size: var(--font-size-sm); /* Was 0.97rem */
    color: var(--text-color-muted-dark); /* Was var(--gray-500) */
    margin-bottom: var(--space-lg); /* Was 1.5rem */
}

.export-options {
    display: flex;
    gap: var(--space-md); /* Was 1rem */
    margin-bottom: var(--space-md); /* Was 1rem */
}

.btn-export { /* This is a custom button style */
    flex: 1;
    padding: var(--space-md) var(--space-xs); /* Was 1rem 0.5rem */
    border-radius: var(--radius-sm);
    background: var(--primary-color-light);
    border: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-xs); /* Was 0.5rem */
    cursor: pointer;
    transition: var(--transition-base);
    color: var(--primary-color);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base); /* Was 1.05rem */
    box-shadow: var(--shadow-sm); /* Was 0 1px 4px rgba(67,97,238,0.07) */
}
.btn-export:hover, .btn-export:focus-visible {
    background-color: var(--primary-color);
    color: var(--text-color-light);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    outline: none;
}

.btn-export:active {
    transform: scale(0.98);
    background: var(--primary-color-dark); /* Was #dbe4ff */
}

.btn-close { /* This is an icon button */
    position: absolute;
    top: var(--space-sm); /* Was 0.5rem */
    right: var(--space-sm); /* Was 0.5rem */
    background: none;
    border: none;
    color: var(--text-color-muted-dark); /* Was var(--gray-500) */
    cursor: pointer;
    font-size: calc(var(--font-size-base) * 1.2); /* Was 1.3rem */
    padding: var(--space-xs);
    border-radius: var(--radius-full);
    transition: var(--transition-short);
}
.btn-close:hover, .btn-close:focus-visible {
    background-color: var(--primary-color-light);
    color: var(--primary-color-dark);
    outline: none;
}


/* Responsive */
@media (max-width: 600px) {
    .history-container {
        max-width: 100vw;
        padding: var(--space-md) var(--space-xs) 90px var(--space-xs); /* Was 1rem 0.1rem 90px 0.1rem */
    }
    .filters-dropdown {
        grid-template-columns: 1fr; /* Keep specific mobile layout */
        padding: var(--space-md) var(--space-sm); /* Was 1.1rem 0.7rem 0.7rem 0.7rem */
        gap: var(--space-sm); /* Was 0.7rem */
    }
    .modal-content {
        padding: var(--space-lg) var(--space-sm); /* Was 1.3rem 0.5rem 1rem 0.5rem */
    }
}

/* Scrollbar moderno - removed as it's in base.css */